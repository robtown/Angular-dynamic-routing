!function(t){"use strict";var i={itemClass:".item",line:"auto",resize:!0,load:!0},e=function(e,s){this.element=e,this.options=t.extend({},i,s),this.init()};e.prototype={init:function(){this.elements=this.element.find(this.options.itemClass),this._setHeight(),this.options.resize&&t(window).on("resize",t.proxy(this._setHeight,this)),this.options.onload&&t(window).on("load",t.proxy(this._setHeight,this))},update:function(){this.elements=this.element.find(this.options.itemClass),this._setHeight()},_getElementsInLine:function(){var i;if("all"===this.options.line)i=this.elements.length;else if("number"===this.options.line&&this.options.line%1==0&&this.options.line>0)i=this.options.line;else{var e=this.elements.first().offset().top,s=0;this.elements.each(function(){var i=t(this).offset().top;if(e!==i)return!1;s++,e=i}),i=s}return i},_setHeight:function(){var i=this,e=0,s=this._getElementsInLine();this.elements.css("height","").each(function(n){var h=t(this).height();if(h>e&&(e=h),n>0&&n%s==s-1)i.elements.slice(n-s+1,n+1).height(e),e=0;else if(n===i.elements.length-1){var o=n%s+1;i.elements.slice(-o).height(e),e=0}})}},t.fn.magicHeight=function(i){if(void 0===i||"object"==typeof i)this.each(function(){t(this).data("plugin_magicHeight",new e(t(this),i))});else if("string"==typeof i&&"_"!==i[0]&&"init"!==i){var s;return this.each(function(){var n=t(this).data("plugin_magicHeight");n instanceof e&&"function"==typeof n[i]&&(s=n[i].apply(n,Array.prototype.slice.call(arguments,1)))}),void 0!==s?s:this}return this}}(jQuery);